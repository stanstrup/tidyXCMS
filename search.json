[{"path":"https://stanstrup.github.io/tidyXCMS/CLAUDE.html","id":null,"dir":"","previous_headings":"","what":"CLAUDE.md","title":"CLAUDE.md","text":"file provides guidance Claude Code (claude.ai/code) working code repository.","code":""},{"path":"https://stanstrup.github.io/tidyXCMS/CLAUDE.html","id":"project-overview","dir":"","previous_headings":"","what":"Project Overview","title":"CLAUDE.md","text":"R package project named tidyXCMS, providing tidy interface XCMS metabolomics data processing.","code":""},{"path":"https://stanstrup.github.io/tidyXCMS/CLAUDE.html","id":"project-task-management","dir":"","previous_headings":"","what":"Project Task Management","title":"CLAUDE.md","text":"IMPORTANT: project uses structured task management system minimize token usage: instructions.md: Contains current/active tasks. Keep file lightweight possible. completed_tasks.md: Archive completed tasks detailed documentation. future_tasks.md: Long-term development roadmap planned features. working tasks: 1. Check instructions.md current work 2. Move completed tasks completed_tasks.md details 3. Keep instructions.md minimal reduce token consumption 4. Reference files context rather duplicating information","code":""},{"path":[]},{"path":"https://stanstrup.github.io/tidyXCMS/CLAUDE.html","id":"package-setup-and-building","dir":"","previous_headings":"R Package Development Commands","what":"Package Setup and Building","title":"CLAUDE.md","text":"","code":"# Install development dependencies install.packages(c(\"devtools\", \"roxygen2\", \"testthat\", \"usethis\"))  # Build package documentation from roxygen comments devtools::document()  # Install the package locally devtools::install()  # Build package bundle devtools::build()  # Check package (runs R CMD check) devtools::check()"},{"path":"https://stanstrup.github.io/tidyXCMS/CLAUDE.html","id":"testing","dir":"","previous_headings":"R Package Development Commands","what":"Testing","title":"CLAUDE.md","text":"IMPORTANT: working specific functions, ALWAYS use testthat::test_file() run relevant test file. Running tests devtools::test() takes much longer necessary.","code":"# Run all tests (can be slow) devtools::test()  # Run a specific test file (PREFERRED - faster for development) testthat::test_file(\"tests/testthat/test-filename.R\")  # Run tests with coverage covr::package_coverage()"},{"path":"https://stanstrup.github.io/tidyXCMS/CLAUDE.html","id":"development-workflow","dir":"","previous_headings":"R Package Development Commands","what":"Development Workflow","title":"CLAUDE.md","text":"","code":"# Load package for interactive development devtools::load_all()  # Create new function/data documentation usethis::use_r(\"function_name\")  # Add test file usethis::use_test(\"function_name\")  # Add package dependency usethis::use_package(\"package_name\")"},{"path":"https://stanstrup.github.io/tidyXCMS/CLAUDE.html","id":"r-package-structure","dir":"","previous_headings":"","what":"R Package Structure","title":"CLAUDE.md","text":"creating R package files, follow structure: DESCRIPTION - Package metadata dependencies NAMESPACE - Package namespace (auto-generated roxygen2) R/ - R source code files man/ - Documentation files (auto-generated roxygen2) tests/testthat/ - Unit tests vignettes/ - Long-form documentation data/ - Package datasets inst/ - Additional files installed dev-docs/ - Research documentation implementation guides (part package, ignored R CMD build)","code":""},{"path":"https://stanstrup.github.io/tidyXCMS/CLAUDE.html","id":"code-style","dir":"","previous_headings":"","what":"Code Style","title":"CLAUDE.md","text":"project follows standard R package conventions: - Use 2 spaces indentation (configured .Rproj file) - Strip trailing whitespace (configured .Rproj file) - Auto-append newline files (configured .Rproj file) - Use UTF-8 encoding","code":""},{"path":"https://stanstrup.github.io/tidyXCMS/CLAUDE.html","id":"testing-requirements","dir":"","previous_headings":"","what":"Testing Requirements","title":"CLAUDE.md","text":"IMPORTANT: functions MUST comprehensive tests: - Test compatibility XCMSnExp XcmsExperiment objects - Even examples/vignettes focus XcmsExperiment, tests must verify XCMSnExp works - Write tests tests/testthat/test-*.R files - Use testthat::test_file() run individual test files - Ensure major code paths covered","code":""},{"path":"https://stanstrup.github.io/tidyXCMS/CLAUDE.html","id":"bioconductor-parallel-processing","dir":"","previous_headings":"","what":"Bioconductor Parallel Processing","title":"CLAUDE.md","text":"IMPORTANT: Always use SerialParam() example code tests: SerialParam? - Faster small datasets: Avoids parallel processing overhead - Eliminates warnings: Prevents ‚Äú‚Äòpackage:stats‚Äô may available‚Äù warnings - Cleaner output: parallel-related messages - Better reproducibility: Consistent behavior across systems use SerialParam: - test files (tests/testthat/) - vignettes examples - code small sample sizes (< 20 samples typically) functions support BPPARAM: - ‚úÖ readMsExperiment() - supports BPPARAM - ‚úÖ findChromPeaks() - supports BPPARAM - ‚ùå groupChromPeaks() - support BPPARAM - ‚ùå adjustRtime() - support BPPARAM Note: Users can still use parallel processing production omitting BPPARAM setting parallel backend.","code":"library(BiocParallel)  # Always include BPPARAM = SerialParam() for functions that support it: xdata <- readMsExperiment(spectraFiles = files, BPPARAM = SerialParam()) xdata <- findChromPeaks(xdata, param = cwp, BPPARAM = SerialParam())  # Note: groupChromPeaks does NOT have BPPARAM parameter xdata <- groupChromPeaks(xdata, param = pdp)"},{"path":"https://stanstrup.github.io/tidyXCMS/CLAUDE.html","id":"key-resources","dir":"","previous_headings":"","what":"Key Resources","title":"CLAUDE.md","text":"XCMS Repository: https://github.com/sneumann/xcms XCMS Source Code: https://github.com/sneumann/xcms/tree/devel/R Metabonaut Tutorials: https://github.com/rformassspectrometry/Metabonaut Original Discussion: https://github.com/sneumann/xcms/issues/551","code":""},{"path":"https://stanstrup.github.io/tidyXCMS/CLAUDE.html","id":"important-conventions","dir":"","previous_headings":"","what":"Important Conventions","title":"CLAUDE.md","text":"Follow XCMS conventions object types methods Maintain compatibility XCMSnExp xcmsExperiment objects Write comprehensive roxygen2 documentation Add examples (even marked \\dontrun) tasks completed, move completed_tasks.md","code":""},{"path":"https://stanstrup.github.io/tidyXCMS/CLAUDE.html","id":"git-workflow","dir":"","previous_headings":"","what":"Git Workflow","title":"CLAUDE.md","text":"Default branch: main feat: - New feature (triggers minor version bump) fix: - Bug fix (triggers patch version bump) docs: - Documentation changes style: - Code style changes (formatting, etc.) refactor: - Code refactoring test: - Adding updating tests chore: - Maintenance tasks Example: feat: add tidy interface peak detection Run R CMD check push/PR Deploy pkgdown site push main Create releases via semantic-release based commit messages Always commit co-authorship footer using Claude Code","code":""},{"path":"https://stanstrup.github.io/tidyXCMS/CLAUDE.html","id":"semantic-release-configuration-for-bioconductor","dir":"","previous_headings":"","what":"Semantic Release Configuration for Bioconductor","title":"CLAUDE.md","text":"IMPORTANT: package uses customized semantic-release configuration tailored Bioconductor submission requirements.","code":""},{"path":"https://stanstrup.github.io/tidyXCMS/CLAUDE.html","id":"version-numbering-strategy","dir":"","previous_headings":"Semantic Release Configuration for Bioconductor","what":"Version Numbering Strategy","title":"CLAUDE.md","text":"Current Status: Pre-release Bioconductor submission (version 0.99.x) commits trigger PATCH releases: feat: fix: commits increment patch version within 0.99.x range 0.99.x?: Bioconductor requires packages start version < 1.0.0 initial submission Configuration Location: .releaserc.json","code":""},{"path":"https://stanstrup.github.io/tidyXCMS/CLAUDE.html","id":"how-it-works","dir":"","previous_headings":"Semantic Release Configuration for Bioconductor","what":"How It Works","title":"CLAUDE.md","text":"configuration intentional temporary: - Keeps version 0.99.x range Bioconductor compliance - Bioconductor acceptance, can changed follow standard semantic versioning - prepare-news.sh script enforces 0.99.x versioning regardless semantic-release output","code":"{   \"releaseRules\": [     {\"type\": \"feat\", \"release\": \"patch\"},     {\"type\": \"fix\", \"release\": \"patch\"},     {\"type\": \"perf\", \"release\": \"patch\"}   ] }"},{"path":"https://stanstrup.github.io/tidyXCMS/CLAUDE.html","id":"after-bioconductor-acceptance","dir":"","previous_headings":"Semantic Release Configuration for Bioconductor","what":"After Bioconductor Acceptance","title":"CLAUDE.md","text":"accepted Bioconductor, update .releaserc.json use standard semantic versioning: - feat: ‚Üí minor version bump (0.99.x ‚Üí 1.0.0, 1.0.0 ‚Üí 1.1.0) - fix: ‚Üí patch version bump (1.0.0 ‚Üí 1.0.1) - BREAKING CHANGE: ‚Üí major version bump (1.0.0 ‚Üí 2.0.0)","code":""},{"path":"https://stanstrup.github.io/tidyXCMS/CLAUDE.html","id":"automated-release-process","dir":"","previous_headings":"Semantic Release Configuration for Bioconductor","what":"Automated Release Process","title":"CLAUDE.md","text":"release workflow automatically: 1. Analyzes commit messages 2. Determines version bump 3. Updates DESCRIPTION, NEWS.md, .bioc_version 4. Creates GitHub release 5. Syncs Bioconductor-specific version tags See .github/workflows/release.yaml .github/prepare-news.sh implementation details.","code":""},{"path":"https://stanstrup.github.io/tidyXCMS/CLAUDE.html","id":"pre-commit-checklist","dir":"","previous_headings":"","what":"Pre-Commit Checklist","title":"CLAUDE.md","text":"IMPORTANT: committing changes, ALWAYS run checks order:","code":""},{"path":"https://stanstrup.github.io/tidyXCMS/CLAUDE.html","id":"id_0-update-description-if-needed","dir":"","previous_headings":"Pre-Commit Checklist","what":"0. Update DESCRIPTION (if needed)","title":"CLAUDE.md","text":"modifying functions, check DESCRIPTION needs updates: - Add new package dependencies Imports: using new packages - Update Suggests: optional dependencies (testing, vignettes) - Ensure imported packages listed","code":""},{"path":"https://stanstrup.github.io/tidyXCMS/CLAUDE.html","id":"id_1-regenerate-documentation","dir":"","previous_headings":"Pre-Commit Checklist","what":"1. Regenerate Documentation","title":"CLAUDE.md","text":"ensures function documentation imports date.","code":"# Update NAMESPACE and .Rd files from roxygen2 comments roxygen2::roxygenize()"},{"path":"https://stanstrup.github.io/tidyXCMS/CLAUDE.html","id":"id_2-r-cmd-check","dir":"","previous_headings":"Pre-Commit Checklist","what":"2. R CMD Check","title":"CLAUDE.md","text":"Fix errors warnings committing. Address notes relevant.","code":"# Check package for errors, warnings, and notes devtools::check()"},{"path":"https://stanstrup.github.io/tidyXCMS/CLAUDE.html","id":"id_3-build-pkgdown-site","dir":"","previous_headings":"Pre-Commit Checklist","what":"3. Build pkgdown Site","title":"CLAUDE.md","text":"Check : - errors site build - vignettes render correctly - function documentation displays properly - broken links missing references commit three checks pass successfully.","code":"# Load all package code devtools::load_all()  # Build pkgdown site locally pkgdown::build_site()"},{"path":"https://stanstrup.github.io/tidyXCMS/CLAUDE.html","id":"id_4-reinstall-package","dir":"","previous_headings":"Pre-Commit Checklist","what":"4. Reinstall Package","title":"CLAUDE.md","text":"ensures package fully functional changes.","code":"# Reinstall the package to ensure all changes are properly loaded devtools::install()"},{"path":"https://stanstrup.github.io/tidyXCMS/CLAUDE.html","id":"id_5-commit-changes","dir":"","previous_headings":"Pre-Commit Checklist","what":"5. Commit Changes","title":"CLAUDE.md","text":"checks pass, commit changes using semantic-release format: - Use conventional commit messages (feat:, fix:, docs:, etc.) - Always include co-authorship footer using Claude Code - Example:","code":"git add -A git commit -m \"feat: add new tidy interface function  ü§ñ Generated with [Claude Code](https://claude.com/claude-code)  Co-Authored-By: Claude <noreply@anthropic.com>\""},{"path":"https://stanstrup.github.io/tidyXCMS/CLAUDE.html","id":"pre-push-checklist","dir":"","previous_headings":"","what":"Pre-Push Checklist","title":"CLAUDE.md","text":"committing, verify everything working pushing GitHub: - Ensure devtools::check() passes errors/warnings - Ensure pkgdown::build_site() completes without errors - Review git status ensure unintended files included","code":""},{"path":"https://stanstrup.github.io/tidyXCMS/CLAUDE.html","id":"task-management","dir":"","previous_headings":"","what":"Task Management","title":"CLAUDE.md","text":"IMPORTANT: start working new tasks instructions.md unless explicitly told user. Wait user give go-ahead proceeding tasks. CRITICAL: Make commits frequently completing task logical unit work: - Commit completed task instructions.md - Don‚Äôt batch multiple tasks one commit - Use semantic commit format commit (feat:, fix:, docs:, etc.) - provides better granularity makes easier track changes - Example workflow: 1. Complete task 1 ‚Üí commit 2. Complete task 2 ‚Üí commit 3. Complete task 3 ‚Üí commit etc.","code":""},{"path":"https://stanstrup.github.io/tidyXCMS/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2025 tidyXCMS authors Permission hereby granted, free charge, person obtaining copy software associated documentation files (‚ÄúSoftware‚Äù), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED ‚Äú‚Äù, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"https://stanstrup.github.io/tidyXCMS/articles/long-format-peaklist.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"Creating Long-Format Peak Tables with Optional Annotations","text":"tidyXCMS package provides functions work XCMS metabolomics data tidy, long-format structure. vignette demonstrates use tidy_peaklist() function create peak tables XCMS results. resulting long-format table one row per feature per sample, integrating: Peak detection results XCMS Feature grouping (correspondence) information Sample metadata structure makes data ideal downstream analysis tidyverse tools like dplyr ggplot2. can optionally enhance tables additional annotations, ‚Äôll explore later vignette.","code":""},{"path":"https://stanstrup.github.io/tidyXCMS/articles/long-format-peaklist.html","id":"setup","dir":"Articles","previous_headings":"","what":"Setup","title":"Creating Long-Format Peak Tables with Optional Annotations","text":"","code":"library(tidyXCMS) library(xcms) library(BiocParallel) library(dplyr) library(ggplot2) library(tidyr) library(MsExperiment)  # Optional packages for enhanced functionality # Install if needed: BiocManager::install(\"CAMERA\") or install.packages(\"commonMZ\") if (requireNamespace(\"MSnbase\", quietly = TRUE)) library(MSnbase) if (requireNamespace(\"CAMERA\", quietly = TRUE)) library(CAMERA) if (requireNamespace(\"MsFeatures\", quietly = TRUE)) library(MsFeatures) if (requireNamespace(\"commonMZ\", quietly = TRUE)) library(commonMZ) if (requireNamespace(\"ggalluvial\", quietly = TRUE)) library(ggalluvial) if (requireNamespace(\"RColorBrewer\", quietly = TRUE)) library(RColorBrewer) if (requireNamespace(\"ggpie\", quietly = TRUE)) library(ggpie)"},{"path":[]},{"path":"https://stanstrup.github.io/tidyXCMS/articles/long-format-peaklist.html","id":"load-example-data","dir":"Articles","previous_headings":"Example Workflow","what":"Load Example Data","title":"Creating Long-Format Peak Tables with Optional Annotations","text":"‚Äôll use xmse dataset XCMS, contains preprocessed LC-MS data wild-type knockout samples. dataset already peak detection feature grouping completed.","code":"# Load example data from XCMS (already preprocessed) xdata <- loadXcmsData(\"xmse\")"},{"path":"https://stanstrup.github.io/tidyXCMS/articles/long-format-peaklist.html","id":"examine-sample-metadata","dir":"Articles","previous_headings":"Example Workflow > Load Example Data","what":"Examine Sample Metadata","title":"Creating Long-Format Peak Tables with Optional Annotations","text":"Let‚Äôs check sample information available:","code":"sampleData(xdata) #> DataFrame with 8 rows and 4 columns #>   sample_name sample_group spectraOrigin sample_type #>   <character>  <character>   <character> <character> #> 1        ko15           KO /usr/local...          QC #> 2        ko16           KO /usr/local...       study #> 3        ko21           KO /usr/local...       study #> 4        ko22           KO /usr/local...          QC #> 5        wt15           WT /usr/local...       study #> 6        wt16           WT /usr/local...       study #> 7        wt21           WT /usr/local...          QC #> 8        wt22           WT /usr/local...       study  # Check results cat(\"Dataset contains\", nrow(chromPeaks(xdata)), \"peaks across\",     length(unique(chromPeaks(xdata)[, \"sample\"])), \"samples,\",     \"grouped into\", nrow(featureDefinitions(xdata)), \"features\\n\") #> Dataset contains 3651 peaks across 8 samples, grouped into 351 features"},{"path":"https://stanstrup.github.io/tidyXCMS/articles/long-format-peaklist.html","id":"fix-file-paths","dir":"Articles","previous_headings":"Example Workflow > Load Example Data","what":"Fix File Paths","title":"Creating Long-Format Peak Tables with Optional Annotations","text":"example data contains file paths original system. need update match current system:","code":"# Get the correct base path for faahKO package on this system cdf_path <- file.path(find.package(\"faahKO\"), \"cdf\")  # Find all CDF files recursively in the cdf_path directory real_paths <- list.files(cdf_path, recursive = TRUE, full.names = TRUE)  # Create a mapping table using basenames for safe matching path_mapping <- tibble(   real_path = real_paths,   basename_file = basename(real_paths) )  # Join with spectra dataOrigin by basename and replace spectra_df <- tibble(dataOrigin = spectra(xdata)$dataOrigin) %>%   mutate(basename_file = basename(dataOrigin)) %>%   left_join(path_mapping, by = \"basename_file\")  spectra(xdata)$dataOrigin <- spectra_df$real_path"},{"path":"https://stanstrup.github.io/tidyXCMS/articles/long-format-peaklist.html","id":"creating-a-basic-long-format-peak-table","dir":"Articles","previous_headings":"Example Workflow","what":"Creating a Basic Long-Format Peak Table","title":"Creating Long-Format Peak Tables with Optional Annotations","text":"Let‚Äôs start creating long-format peak table directly XCMS results. gives us essential peak information tidy format. resulting table contains feature peak information XCMS, organized one row per feature per sample.","code":"# Create basic peak table peak_table <- tidy_peaklist(xdata)  # Check the structure dim(peak_table) #> [1] 2808   28  # View first few rows head(peak_table) #> # A tibble: 6 √ó 28 #>   sample_name sample_group spectraOrigin sample_type fromFile feature_id f_mzmed #>   <chr>       <chr>        <chr>         <chr>          <dbl>      <int>   <dbl> #> 1 ko15        KO           /usr/local/l‚Ä¶ QC                 1          1    200. #> 2 ko15        KO           /usr/local/l‚Ä¶ QC                 1          2    205  #> 3 ko15        KO           /usr/local/l‚Ä¶ QC                 1          3    206  #> 4 ko15        KO           /usr/local/l‚Ä¶ QC                 1          4    207. #> 5 ko15        KO           /usr/local/l‚Ä¶ QC                 1          5    233  #> 6 ko15        KO           /usr/local/l‚Ä¶ QC                 1          6    241. #> # ‚Ñπ 21 more variables: f_mzmin <dbl>, f_mzmax <dbl>, f_rtmed <dbl>, #> #   f_rtmin <dbl>, f_rtmax <dbl>, ms_level <int>, filepath <chr>, #> #   filename <chr>, peakidx <dbl>, mz <dbl>, mzmin <dbl>, mzmax <dbl>, #> #   rt <dbl>, rtmin <dbl>, rtmax <dbl>, into <dbl>, intb <dbl>, maxo <dbl>, #> #   sn <dbl>, is_filled <lgl>, merged <lgl>  # Check column names colnames(peak_table) #>  [1] \"sample_name\"   \"sample_group\"  \"spectraOrigin\" \"sample_type\"   #>  [5] \"fromFile\"      \"feature_id\"    \"f_mzmed\"       \"f_mzmin\"       #>  [9] \"f_mzmax\"       \"f_rtmed\"       \"f_rtmin\"       \"f_rtmax\"       #> [13] \"ms_level\"      \"filepath\"      \"filename\"      \"peakidx\"       #> [17] \"mz\"            \"mzmin\"         \"mzmax\"         \"rt\"            #> [21] \"rtmin\"         \"rtmax\"         \"into\"          \"intb\"          #> [25] \"maxo\"          \"sn\"            \"is_filled\"     \"merged\""},{"path":"https://stanstrup.github.io/tidyXCMS/articles/long-format-peaklist.html","id":"enhancing-peak-tables-with-camera-annotations","dir":"Articles","previous_headings":"Example Workflow","what":"Enhancing Peak Tables with CAMERA Annotations","title":"Creating Long-Format Peak Tables with Optional Annotations","text":"CAMERA can annotate isotopes, adducts, group features pseudospectra, providing valuable chemical context peak table. Note: CAMERA requires xcmsSet object. Since data XcmsExperiment, first convert XCMSnExp xcmsSet.","code":""},{"path":"https://stanstrup.github.io/tidyXCMS/articles/long-format-peaklist.html","id":"creating-a-camera-object","dir":"Articles","previous_headings":"Example Workflow > Enhancing Peak Tables with CAMERA Annotations","what":"Creating a CAMERA object","title":"Creating Long-Format Peak Tables with Optional Annotations","text":"first step create CAMERA object XCMS object. specify polarity help CAMERA determine appropriate adducts fragments.","code":"# Convert XcmsExperiment to xcmsSet for CAMERA (required for compatibility) # Two-step conversion: XcmsExperiment -> XCMSnExp -> xcmsSet xset <- xdata %>%   as(\"XCMSnExp\") %>%   as(\"xcmsSet\")  # Create xsAnnotate object with polarity xs <- xsAnnotate(xset, polarity = \"positive\")"},{"path":"https://stanstrup.github.io/tidyXCMS/articles/long-format-peaklist.html","id":"grouping-coeluting-peaks","dir":"Articles","previous_headings":"Example Workflow > Enhancing Peak Tables with CAMERA Annotations","what":"Grouping coeluting peaks","title":"Creating Long-Format Peak Tables with Optional Annotations","text":"first step grouping features group co-eluting peaks. na√Øve approach refine later.","code":"# Group peaks by retention time xs <- groupFWHM(xs, perfwhm = 0.1, intval = \"into\", sigma = 6) #> Start grouping after retention time. #> Created 226 pseudospectra."},{"path":"https://stanstrup.github.io/tidyXCMS/articles/long-format-peaklist.html","id":"grouping-based-on-correlation","dir":"Articles","previous_headings":"Example Workflow > Enhancing Peak Tables with CAMERA Annotations","what":"Grouping based on correlation","title":"Creating Long-Format Peak Tables with Optional Annotations","text":"Now group features based correlations. looks group previous step splits separate groups peaks correlate . Note: small example dataset, don‚Äôt use correlation across samples unreliable samples.","code":"# Group by correlation xs <- groupCorr(xs, calcIso = FALSE, calcCiS = TRUE, calcCaS = FALSE, cor_eic_th = 0.7, pval = 1E-6) #> Start grouping after correlation. #> Generating EIC's ..  #>  #> Calculating peak correlations in 226 Groups...  #>  % finished: 10  20  30  40  50  60  70  80  90  100   #>  #> Calculating graph cross linking in 226 Groups...  #>  % finished: 10  20  30  40  50  60  70  80  90  100   #> New number of ps-groups:  271  #> xsAnnotate has now 271 groups, instead of 226"},{"path":"https://stanstrup.github.io/tidyXCMS/articles/long-format-peaklist.html","id":"isotope-annotation","dir":"Articles","previous_headings":"Example Workflow > Enhancing Peak Tables with CAMERA Annotations","what":"Isotope annotation","title":"Creating Long-Format Peak Tables with Optional Annotations","text":"annotates peaks possible isotopes based m/z difference intensity patterns.","code":"# Find isotopes xs <- findIsotopes(xs, ppm = 10, mzabs = 0.01, intval = \"into\", maxcharge = 2) #> Generating peak matrix! #> Run isotope peak annotation #>  % finished: 10  20  30  40  50  60  70  80  90  100   #> Found isotopes: 29"},{"path":"https://stanstrup.github.io/tidyXCMS/articles/long-format-peaklist.html","id":"annotation-of-adducts-and-fragments","dir":"Articles","previous_headings":"Example Workflow > Enhancing Peak Tables with CAMERA Annotations","what":"Annotation of adducts and fragments","title":"Creating Long-Format Peak Tables with Optional Annotations","text":"Now try annotate adducts fragments based expected mass differences. ‚Äôll use commonMZ package generate comprehensive list adduct fragment rules CAMERA. First, get adduct/fragment rules positive mode: Now can annotate adducts using rules:","code":"# warn_clash=TRUE will warn about indistinguishable annotations (e.g., [M+NH4]+ vs -NH3) # Remove [M+NH4]+ if it's less common in your data  rules_pos <- MZ_CAMERA(mode = \"pos\", warn_clash = TRUE, clash_ppm = 5) %>%   filter(name != \"[M+NH4]+\") %>%   as.data.frame() #> Warning in MZ_CAMERA(mode = \"pos\", warn_clash = TRUE, clash_ppm = 5): The following adducts/fragments seem to collide. #> # A tibble: 2 √ó 2 #>   first       second                              #>   <chr>       <chr>                               #> 1 [M+H-NH3]+  [M+NH4]+                            #> 2 [M+H-C3H4]+ [M+H+(CH3)2CO-H2O]+ (acetone cond.) #>  #>  #> Consider removing one of them. Example:  #>  rules=rules[            !grepl(\"[M+NH4]+\",rules[,\"name\"],fixed=TRUE)         ,] # Find adducts using the rules from commonMZ xs <- findAdducts(xs, ppm = 500, mzabs = 0.2, multiplier = 4, polarity = \"positive\", rules = rules_pos) #> Generating peak matrix for peak annotation! #> Polarity is set in xsAnnotate: positive  #> Found and use user-defined ruleset! #> Calculating possible adducts in 271 Groups...  #>  % finished: 10  20  30  40  50  60  70  80  90  100"},{"path":"https://stanstrup.github.io/tidyXCMS/articles/long-format-peaklist.html","id":"creating-the-peak-table-with-camera-annotations","dir":"Articles","previous_headings":"Example Workflow > Enhancing Peak Tables with CAMERA Annotations","what":"Creating the Peak Table with CAMERA Annotations","title":"Creating Long-Format Peak Tables with Optional Annotations","text":"Now can create peak table includes CAMERA annotations. pass original xdata object CAMERA annotations xs: table now includes additional columns CAMERA annotations: isotopes, adduct, pcgroup (pseudospectrum correlation group).","code":"peak_table_camera <- tidy_peaklist(xdata, xs)  # Check the structure dim(peak_table_camera) #> [1] 2808   31 colnames(peak_table_camera) #>  [1] \"sample_name\"   \"sample_group\"  \"spectraOrigin\" \"sample_type\"   #>  [5] \"fromFile\"      \"feature_id\"    \"f_mzmed\"       \"f_mzmin\"       #>  [9] \"f_mzmax\"       \"f_rtmed\"       \"f_rtmin\"       \"f_rtmax\"       #> [13] \"ms_level\"      \"isotopes\"      \"adduct\"        \"pcgroup\"       #> [17] \"filepath\"      \"filename\"      \"peakidx\"       \"mz\"            #> [21] \"mzmin\"         \"mzmax\"         \"rt\"            \"rtmin\"         #> [25] \"rtmax\"         \"into\"          \"intb\"          \"maxo\"          #> [29] \"sn\"            \"is_filled\"     \"merged\""},{"path":"https://stanstrup.github.io/tidyXCMS/articles/long-format-peaklist.html","id":"enhancing-peak-tables-with-msfeatures-grouping","dir":"Articles","previous_headings":"Example Workflow","what":"Enhancing Peak Tables with MsFeatures Grouping","title":"Creating Long-Format Peak Tables with Optional Annotations","text":"MsFeatures package offers another way enhance peak tables grouping features based retention time similarity, abundance correlation, EIC similarity.","code":""},{"path":"https://stanstrup.github.io/tidyXCMS/articles/long-format-peaklist.html","id":"why-use-msfeatures","dir":"Articles","previous_headings":"Example Workflow > Enhancing Peak Tables with MsFeatures Grouping","what":"Why Use MsFeatures?","title":"Creating Long-Format Peak Tables with Optional Annotations","text":"Retention Time Grouping: Group co-eluting features likely come compound Abundance Correlation: Group features correlated intensities across samples EIC Similarity: Group features based similar extracted ion chromatograms Stepwise Refinement: Apply multiple grouping algorithms sequentially refine groups","code":""},{"path":"https://stanstrup.github.io/tidyXCMS/articles/long-format-peaklist.html","id":"applying-feature-grouping","dir":"Articles","previous_headings":"Example Workflow > Enhancing Peak Tables with MsFeatures Grouping","what":"Applying Feature Grouping","title":"Creating Long-Format Peak Tables with Optional Annotations","text":"groupFeatures() function adds feature_group column feature definitions. Let‚Äôs demonstrate retention time-based grouping:","code":"# Group features with similar retention times (within 10 seconds) xdata_grouped <- groupFeatures(xdata, param = SimilarRtimeParam(diffRt = 10))  # Check feature groups in featureDefinitions head(featureDefinitions(xdata_grouped)$feature_group) #> [1] \"FG.083\" \"FG.005\" \"FG.005\" \"FG.078\" \"FG.016\" \"FG.073\"  # Count how many feature groups were created table(featureDefinitions(xdata_grouped)$feature_group) #>  #> FG.001 FG.002 FG.003 FG.004 FG.005 FG.006 FG.007 FG.008 FG.009 FG.010 FG.011  #>      4      6      2      4      6      5      2      4      3      4      3  #> FG.012 FG.013 FG.014 FG.015 FG.016 FG.017 FG.018 FG.019 FG.020 FG.021 FG.022  #>      6      4      2      3      3      3      4      3      2      5      2  #> FG.023 FG.024 FG.025 FG.026 FG.027 FG.028 FG.029 FG.030 FG.031 FG.032 FG.033  #>      2      4      5      2      5      2      3      4      2      2      4  #> FG.034 FG.035 FG.036 FG.037 FG.038 FG.039 FG.040 FG.041 FG.042 FG.043 FG.044  #>      2      2      6      3      2      2      4      2      2      4      4  #> FG.045 FG.046 FG.047 FG.048 FG.049 FG.050 FG.051 FG.052 FG.053 FG.054 FG.055  #>      2      3      2      3      3      5      2      3      4      2      6  #> FG.056 FG.057 FG.058 FG.059 FG.060 FG.061 FG.062 FG.063 FG.064 FG.065 FG.066  #>      2      6      4      2      4      3      3      2      2      2      2  #> FG.067 FG.068 FG.069 FG.070 FG.071 FG.072 FG.073 FG.074 FG.075 FG.076 FG.077  #>      3      2      2      3      2      3      2      3      3      3      3  #> FG.078 FG.079 FG.080 FG.081 FG.082 FG.083 FG.084 FG.085 FG.086 FG.087 FG.088  #>      2      3      3      3      2      3      3      3      3      3      2  #> FG.089 FG.090 FG.091 FG.092 FG.093 FG.094 FG.095 FG.096 FG.097 FG.098 FG.099  #>      3      2      2      2      2      3      2      4      2      3      3  #> FG.100 FG.101 FG.102 FG.103 FG.104 FG.105 FG.106 FG.107 FG.108 FG.109 FG.110  #>      3      3      2      2      2      2      2      2      2      2      2  #> FG.111 FG.112 FG.113 FG.114 FG.115 FG.116 FG.117 FG.118 FG.119 FG.120 FG.121  #>      2      2      1      1      1      1      1      1      1      1      1  #> FG.122 FG.123 FG.124 FG.125 FG.126 FG.127 FG.128 FG.129 FG.130 FG.131 FG.132  #>      1      1      1      1      1      1      1      1      1      1      1  #> FG.133  #>      1"},{"path":"https://stanstrup.github.io/tidyXCMS/articles/long-format-peaklist.html","id":"creating-peak-table-with-msfeatures-grouping","dir":"Articles","previous_headings":"Example Workflow > Enhancing Peak Tables with MsFeatures Grouping","what":"Creating Peak Table with MsFeatures Grouping","title":"Creating Long-Format Peak Tables with Optional Annotations","text":"create long-format peak table object feature groups, feature_group column automatically included:","code":"# Create peak table with feature grouping peak_table_grouped <- tidy_peaklist(xdata_grouped)  # Check that feature_group column is present \"feature_group\" %in% colnames(peak_table_grouped) #> [1] TRUE  # View some feature groups peak_table_grouped %>%   select(feature_id, feature_group, f_mzmed, f_rtmed) %>%   distinct() %>%   head(10) #> # A tibble: 10 √ó 4 #>    feature_id feature_group f_mzmed f_rtmed #>         <int> <chr>           <dbl>   <dbl> #>  1          1 FG.083           200.   2903. #>  2          2 FG.005           205    2790. #>  3          3 FG.005           206    2789. #>  4          4 FG.078           207.   2719. #>  5          5 FG.016           233    3024. #>  6          6 FG.073           241.   3683. #>  7          7 FG.024           242.   3664. #>  8          8 FG.113           244.   2833. #>  9          9 FG.071           249.   3676. #> 10         10 FG.072           250.   3675."},{"path":"https://stanstrup.github.io/tidyXCMS/articles/long-format-peaklist.html","id":"combining-camera-and-msfeatures-annotations","dir":"Articles","previous_headings":"Example Workflow","what":"Combining CAMERA and MsFeatures Annotations","title":"Creating Long-Format Peak Tables with Optional Annotations","text":"can also combine approaches. Apply groupFeatures() first, proceed CAMERA annotation: Now : feature_group: Groups features based retention time correlation across samples (MsFeatures) pcgroup: Groups features pseudospectra based EIC similarity (CAMERA) isotopes adduct: Isotope adduct annotations (CAMERA) combined approach gives multiple perspectives features might originate compound.  can also visually compare mapping.  just look mapped CAMERA groupFeatures.","code":"# Apply feature grouping xdata_grouped <- groupFeatures(xdata, param = SimilarRtimeParam(diffRt = 10))  # Create peak table with both CAMERA and MsFeatures annotations # Reuse the xs object created earlier (CAMERA annotations are the same) peak_table_combined <- tidy_peaklist(xdata_grouped, xs)  # View combined annotations peak_table_combined %>%   filter(adduct != \"\") %>%   select(feature_id, feature_group, f_mzmed, f_rtmed, isotopes, adduct, pcgroup) %>%   distinct(feature_id, .keep_all = TRUE) %>%   head() #> # A tibble: 6 √ó 7 #>   feature_id feature_group f_mzmed f_rtmed isotopes  adduct              pcgroup #>        <int> <chr>           <dbl>   <dbl> <chr>     <chr>                 <int> #> 1          3 FG.005           206    2789. \"\"        [M+2K]2+ 334.047 [‚Ä¶      11 #> 2          6 FG.073           241.   3683. \"\"        [M+H-S]+ 272.112 [‚Ä¶      87 #> 3         11 FG.073           255.   3682. \"\"        [M+H-H2O]+ 272.112       87 #> 4         13 FG.001           266.   3669. \"\"        [M+H-C2H4-CO2]+ 33‚Ä¶      44 #> 5         19 FG.005           279    2788. \"\"        [M+H-C3H4O]+ 334.0‚Ä¶      11 #> 6         21 FG.001           281.   3669. \"[1][M]+\" [M+H-NH3-C3H4]+ 33‚Ä¶      44 group_mapping <- peak_table_combined %>%   filter(adduct != \"\") %>%   select(feature_id, feature_group, f_mzmed, f_rtmed, isotopes, adduct, pcgroup) %>%   distinct(feature_id, .keep_all = TRUE)  # Determine ordering by the most common pairs order_group_mapping <- group_mapping %>%   count(feature_group, pcgroup, sort = TRUE)  # Choose ordering to align best-matching pairs left_order  <- unique(order_group_mapping$feature_group) right_order <- unique(order_group_mapping$pcgroup)  group_mapping <- group_mapping %>%   mutate(     feature_group = factor(feature_group, levels = left_order),     pcgroup       = factor(pcgroup,       levels = right_order)   )  ggplot(group_mapping, aes(axis1 = feature_group, axis2 = pcgroup, fill = feature_group)) +   geom_alluvium(alpha = 0.7) +   geom_stratum() +   geom_text(stat = \"stratum\", aes(label = after_stat(stratum))) +   theme_minimal() +   labs(x = \"\", y = \"Count\", title = \"Flow between groupings A and B\") +   guides(fill=\"none\") +   scale_fill_manual(values = rep(brewer.pal(12, \"Set3\"), length.out = length(unique(group_mapping$feature_group)))) group_mapping_different <- group_mapping %>%   group_by(feature_group) %>%   mutate(n_pc = n_distinct(pcgroup)) %>%   group_by(pcgroup) %>%   mutate(n_fg = n_distinct(feature_group)) %>%   ungroup() %>%   filter(n_pc > 1 | n_fg > 1)   ggplot(group_mapping_different, aes(axis1 = feature_group, axis2 = pcgroup, fill = feature_group)) +   geom_alluvium(alpha = 0.7) +   geom_stratum() +   geom_text(stat = \"stratum\", aes(label = after_stat(stratum))) +   theme_minimal() +   labs(x = \"\", y = \"Count\", title = \"Flow between groupings A and B\") +   guides(fill=\"none\") +   scale_fill_manual(values = rep(brewer.pal(12, \"Set3\"), length.out = length(unique(group_mapping_different$feature_group))))"},{"path":"https://stanstrup.github.io/tidyXCMS/articles/long-format-peaklist.html","id":"understanding-the-output","dir":"Articles","previous_headings":"","what":"Understanding the Output","title":"Creating Long-Format Peak Tables with Optional Annotations","text":"resulting tibble contains comprehensive information feature sample. complete description columns:","code":""},{"path":"https://stanstrup.github.io/tidyXCMS/articles/long-format-peaklist.html","id":"column-reference-table","dir":"Articles","previous_headings":"Understanding the Output","what":"Column Reference Table","title":"Creating Long-Format Peak Tables with Optional Annotations","text":"table organized logical groups easier understanding: Important notes: row represents one feature one sample feature detected sample, peak-level columns (mz, rt, , etc.) NA Feature-level statistics (f_mzmed, f_rtmed, etc.) always present represent values across samples CAMERA annotations (isotopes, adduct, pcgroup) optional present xsAnnotate provided MsFeatures annotations (feature_group) optional present groupFeatures() applied CAMERA MsFeatures annotations apply feature level across samples given feature Feature-level (prefix f_): Statistics aggregated across samples Peak-level (prefix): Values specific peak specific sample","code":""},{"path":"https://stanstrup.github.io/tidyXCMS/articles/long-format-peaklist.html","id":"feature-level-information","dir":"Articles","previous_headings":"Understanding the Output","what":"Feature-Level Information","title":"Creating Long-Format Peak Tables with Optional Annotations","text":"columns describe feature (grouped peak):","code":"peak_table %>%   select(feature_id, f_mzmed, f_rtmed) %>%   distinct() %>%   head() #> # A tibble: 6 √ó 3 #>   feature_id f_mzmed f_rtmed #>        <int>   <dbl>   <dbl> #> 1          1    200.   2903. #> 2          2    205    2790. #> 3          3    206    2789. #> 4          4    207.   2719. #> 5          5    233    3024. #> 6          6    241.   3683."},{"path":"https://stanstrup.github.io/tidyXCMS/articles/long-format-peaklist.html","id":"camera-annotations","dir":"Articles","previous_headings":"Understanding the Output","what":"CAMERA Annotations","title":"Creating Long-Format Peak Tables with Optional Annotations","text":"CAMERA annotations included, additional columns available: isotopes: Isotope annotation (e.g., ‚Äú[M]+‚Äù, ‚Äú[M+1]+‚Äù) adduct: Adduct annotation (e.g., ‚Äú[M+H]+‚Äù, ‚Äú[M+Na]+‚Äù) pcgroup: Pseudospectrum correlation group ID","code":"# View features with adduct annotations (using the CAMERA-annotated table) peak_table_camera %>%   filter(adduct!=\"\") %>%   select(feature_id, f_mzmed, f_rtmed, isotopes, adduct, pcgroup) %>%   distinct(feature_id, .keep_all = TRUE) %>%   head() #> # A tibble: 6 √ó 6 #>   feature_id f_mzmed f_rtmed isotopes  adduct                            pcgroup #>        <int>   <dbl>   <dbl> <chr>     <chr>                               <int> #> 1          3    206    2789. \"\"        [M+2K]2+ 334.047 [M+H-NH3-CO2-C5‚Ä¶      11 #> 2          6    241.   3683. \"\"        [M+H-S]+ 272.112 [M+H-CH3OH]+ 27‚Ä¶      87 #> 3         11    255.   3682. \"\"        [M+H-H2O]+ 272.112                     87 #> 4         13    266.   3669. \"\"        [M+H-C2H4-CO2]+ 337.215 [M+H-C4H‚Ä¶      44 #> 5         19    279    2788. \"\"        [M+H-C3H4O]+ 334.047 [M+H-C4H8]+‚Ä¶      11 #> 6         21    281.   3669. \"[1][M]+\" [M+H-NH3-C3H4]+ 337.215                44"},{"path":"https://stanstrup.github.io/tidyXCMS/articles/long-format-peaklist.html","id":"peak-level-information","dir":"Articles","previous_headings":"Understanding the Output","what":"Peak-Level Information","title":"Creating Long-Format Peak Tables with Optional Annotations","text":"feature sample: mz, rt: Detected peak position : Integrated peak intensity intb: Baseline-corrected intensity maxo: Maximum intensity sn: Signal--noise ratio","code":"# View detected peaks (non-NA intensities) peak_table %>%   filter(!is.na(into)) %>%   select(feature_id, filename, mz, rt, into, sn) %>%   head() #> # A tibble: 6 √ó 6 #>   feature_id filename    mz    rt     into    sn #>        <int> <chr>    <dbl> <dbl>    <dbl> <dbl> #> 1          1 ko15.CDF  200. 2933.  135162.    NA #> 2          2 ko15.CDF  205  2792. 1924712.    64 #> 3          3 ko15.CDF  206  2790.  213659.    14 #> 4          4 ko15.CDF  207. 2718.  349011.    17 #> 5          5 ko15.CDF  233  3035.  286221.    23 #> 6          6 ko15.CDF  241. 3681. 1160580.    11"},{"path":"https://stanstrup.github.io/tidyXCMS/articles/long-format-peaklist.html","id":"sample-information","dir":"Articles","previous_headings":"Understanding the Output","what":"Sample Information","title":"Creating Long-Format Peak Tables with Optional Annotations","text":"filename, filepath: Sample file information fromFile: Sample index Plus columns sampleData() (sample metadata)","code":"peak_table %>%   select(feature_id, filename, sample_name, sample_group, sample_type) %>%   head() #> # A tibble: 6 √ó 5 #>   feature_id filename sample_name sample_group sample_type #>        <int> <chr>    <chr>       <chr>        <chr>       #> 1          1 ko15.CDF ko15        KO           QC          #> 2          2 ko15.CDF ko15        KO           QC          #> 3          3 ko15.CDF ko15        KO           QC          #> 4          4 ko15.CDF ko15        KO           QC          #> 5          5 ko15.CDF ko15        KO           QC          #> 6          6 ko15.CDF ko15        KO           QC"},{"path":"https://stanstrup.github.io/tidyXCMS/articles/long-format-peaklist.html","id":"missing-values","dir":"Articles","previous_headings":"Understanding the Output","what":"Missing Values","title":"Creating Long-Format Peak Tables with Optional Annotations","text":"Features detected sample NA peak-level columns:","code":"# Count for each feature how many samples the peak was found in detection_rate <- peak_table %>%   group_by(feature_id, f_mzmed, f_rtmed) %>%   summarise(     n_samples_detected = sum(!is.na(into)),     n_samples_total = n(),     detection_rate = n_samples_detected / n_samples_total,     .groups = \"drop\"   ) %>%   arrange(desc(detection_rate))  hist(detection_rate$detection_rate, breaks=10, main = \"Histogram of feature detection rate\")"},{"path":[]},{"path":"https://stanstrup.github.io/tidyXCMS/articles/long-format-peaklist.html","id":"visualize-feature-intensities","dir":"Articles","previous_headings":"Downstream Analysis Examples","what":"Visualize Feature Intensities","title":"Creating Long-Format Peak Tables with Optional Annotations","text":"","code":"# Plot intensity distribution by sample group peak_table %>%   filter(feature_id == 10) %>%   ggplot(aes(x = sample_group, y = log10(into), fill = sample_group)) +   geom_boxplot() +   labs(     title = \"Feature Intensity Distribution\",     x = \"Sample Group\",     y = \"log10(Intensity)\"   ) +   theme_minimal()"},{"path":"https://stanstrup.github.io/tidyXCMS/articles/long-format-peaklist.html","id":"identify-features-with-adduct-annotations","dir":"Articles","previous_headings":"Downstream Analysis Examples","what":"Identify Features with Adduct Annotations","title":"Creating Long-Format Peak Tables with Optional Annotations","text":"","code":"# Count features by adduct type (using the CAMERA-annotated table) adduct_counts <- peak_table_camera %>%   filter(adduct!=\"\") %>%   separate_rows(adduct, sep = \"\\\\s(?=\\\\[M)\") %>%   distinct(feature_id, adduct) %>%   mutate(adduct = gsub(\"^(\\\\[.*\\\\].*\\\\+).*\",\"\\\\1\",adduct)) %>%    count(adduct, sort = TRUE)  adduct_counts #> # A tibble: 33 √ó 2 #>    adduct                  n #>    <chr>               <int> #>  1 [M+H]+                 12 #>  2 [M+Na]+                12 #>  3 [M+H-H2O]+             10 #>  4 [M+K]+                  6 #>  5 [M+H-C3H9N-C2H4O2]+     5 #>  6 [M+H-CH4]+              5 #>  7 [M+H-O]+                5 #>  8 [M+H-NH3]+              4 #>  9 [M+H-CH3OH]+            3 #> 10 [M+H-S]+                3 #> # ‚Ñπ 23 more rows"},{"path":"https://stanstrup.github.io/tidyXCMS/articles/long-format-peaklist.html","id":"visualize-adduct-distribution","dir":"Articles","previous_headings":"Downstream Analysis Examples > Identify Features with Adduct Annotations","what":"Visualize Adduct Distribution","title":"Creating Long-Format Peak Tables with Optional Annotations","text":"can create pie chart showing frequency different adducts fragments found CAMERA:","code":"# Create pie chart of adduct frequencies adduct_counts %>%    mutate(count = n) %>%      ggpie(data = .,            group_key = \"adduct\",            count_type = \"count\",           label_info = \"group\",            label_type = \"circle\",           label_size = 4,            label_pos = \"out\"           ) +     guides(fill=\"none\") +     ggtitle(\"Distribution of Adduct Annotations\")"},{"path":"https://stanstrup.github.io/tidyXCMS/articles/long-format-peaklist.html","id":"extract-specific-features-for-further-analysis","dir":"Articles","previous_headings":"Downstream Analysis Examples","what":"Extract Specific Features for Further Analysis","title":"Creating Long-Format Peak Tables with Optional Annotations","text":"","code":"# Get a specific feature across all samples feature_123 <- peak_table %>%   filter(feature_id == 123) %>%   select(feature_id, filename, sample_group, mz, rt, into)  head(feature_123) #> # A tibble: 6 √ó 6 #>   feature_id filename sample_group    mz    rt    into #>        <int> <chr>    <chr>        <dbl> <dbl>   <dbl> #> 1        123 ko15.CDF KO            371. 3657. 563419. #> 2        123 ko16.CDF KO            371. 3657. 320434. #> 3        123 ko21.CDF KO            371. 3649. 123876. #> 4        123 ko22.CDF KO            371. 3633. 173440. #> 5        123 wt15.CDF WT            371. 3632. 570454. #> 6        123 wt16.CDF WT            371. 3639. 287139."},{"path":"https://stanstrup.github.io/tidyXCMS/articles/long-format-peaklist.html","id":"session-info","dir":"Articles","previous_headings":"","what":"Session Info","title":"Creating Long-Format Peak Tables with Optional Annotations","text":"","code":"sessionInfo() #> R version 4.5.2 (2025-10-31) #> Platform: x86_64-pc-linux-gnu #> Running under: Ubuntu 24.04.3 LTS #>  #> Matrix products: default #> BLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3  #> LAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.26.so;  LAPACK version 3.12.0 #>  #> locale: #>  [1] LC_CTYPE=C.UTF-8       LC_NUMERIC=C           LC_TIME=C.UTF-8        #>  [4] LC_COLLATE=C.UTF-8     LC_MONETARY=C.UTF-8    LC_MESSAGES=C.UTF-8    #>  [7] LC_PAPER=C.UTF-8       LC_NAME=C              LC_ADDRESS=C           #> [10] LC_TELEPHONE=C         LC_MEASUREMENT=C.UTF-8 LC_IDENTIFICATION=C    #>  #> time zone: UTC #> tzcode source: system (glibc) #>  #> attached base packages: #> [1] stats4    stats     graphics  grDevices utils     datasets  methods   #> [8] base      #>  #> other attached packages: #>  [1] ggpie_0.2.5         RColorBrewer_1.1-3  ggalluvial_0.12.5   #>  [4] commonMZ_0.0.2      MsFeatures_1.18.0   CAMERA_1.66.0       #>  [7] MSnbase_2.36.0      S4Vectors_0.48.0    mzR_2.44.0          #> [10] Rcpp_1.1.0          Biobase_2.70.0      BiocGenerics_0.56.0 #> [13] generics_0.1.4      MsExperiment_1.12.0 ProtGenerics_1.42.0 #> [16] tidyr_1.3.1         ggplot2_4.0.0       dplyr_1.1.4         #> [19] xcms_4.8.0          BiocParallel_1.44.0 tidyXCMS_0.99.15    #>  #> loaded via a namespace (and not attached): #>   [1] rstudioapi_0.17.1           jsonlite_2.0.0              #>   [3] MultiAssayExperiment_1.36.0 magrittr_2.0.4              #>   [5] farver_2.1.2                MALDIquant_1.22.3           #>   [7] rmarkdown_2.30              fs_1.6.6                    #>   [9] ragg_1.5.0                  vctrs_0.6.5                 #>  [11] base64enc_0.1-3             htmltools_0.5.8.1           #>  [13] S4Arrays_1.10.0             BiocBaseUtils_1.12.0        #>  [15] progress_1.2.3              cellranger_1.1.0            #>  [17] SparseArray_1.10.1          Formula_1.2-5               #>  [19] mzID_1.48.0                 sass_0.4.10                 #>  [21] bslib_0.9.0                 htmlwidgets_1.6.4           #>  [23] desc_1.4.3                  plyr_1.8.9                  #>  [25] impute_1.84.0               cachem_1.1.0                #>  [27] igraph_2.2.1                lifecycle_1.0.4             #>  [29] iterators_1.0.14            pkgconfig_2.0.3             #>  [31] Matrix_1.7-4                R6_2.6.1                    #>  [33] fastmap_1.2.0               MatrixGenerics_1.22.0       #>  [35] clue_0.3-66                 digest_0.6.37               #>  [37] ggnewscale_0.5.2            pcaMethods_2.2.0            #>  [39] colorspace_2.1-2            textshaping_1.0.4           #>  [41] Hmisc_5.2-4                 GenomicRanges_1.62.0        #>  [43] labeling_0.4.3              Spectra_1.20.0              #>  [45] abind_1.4-8                 compiler_4.5.2              #>  [47] bit64_4.6.0-1               withr_3.0.2                 #>  [49] doParallel_1.0.17           htmlTable_2.4.3             #>  [51] S7_0.2.0                    backports_1.5.0             #>  [53] DBI_1.2.3                   MASS_7.3-65                 #>  [55] DelayedArray_0.36.0         tools_4.5.2                 #>  [57] PSMatch_1.14.0              foreign_0.8-90              #>  [59] nnet_7.3-20                 glue_1.8.0                  #>  [61] QFeatures_1.20.0            grid_4.5.2                  #>  [63] checkmate_2.3.3             cluster_2.1.8.1             #>  [65] reshape2_1.4.4              gtable_0.3.6                #>  [67] tzdb_0.5.0                  preprocessCore_1.72.0       #>  [69] data.table_1.17.8           hms_1.1.4                   #>  [71] MetaboCoreUtils_1.18.0      utf8_1.2.6                  #>  [73] XVector_0.50.0              ggrepel_0.9.6               #>  [75] foreach_1.5.2               pillar_1.11.1               #>  [77] stringr_1.6.0               vroom_1.6.6                 #>  [79] limma_3.66.0                lattice_0.22-7              #>  [81] bit_4.6.0                   tidyselect_1.2.1            #>  [83] RBGL_1.86.0                 knitr_1.50                  #>  [85] gridExtra_2.3               IRanges_2.44.0              #>  [87] Seqinfo_1.0.0               SummarizedExperiment_1.40.0 #>  [89] xfun_0.54                   statmod_1.5.1               #>  [91] matrixStats_1.5.0           stringi_1.8.7               #>  [93] lazyeval_0.2.2              yaml_2.3.10                 #>  [95] evaluate_1.0.5              codetools_0.2-20            #>  [97] MsCoreUtils_1.21.0          tibble_3.3.0                #>  [99] BiocManager_1.30.26         graph_1.88.0                #> [101] cli_3.6.5                   affyio_1.80.0               #> [103] rpart_4.1.24                systemfonts_1.3.1           #> [105] jquerylib_0.1.4             MassSpecWavelet_1.76.0      #> [107] readxl_1.4.5                XML_3.99-0.20               #> [109] parallel_4.5.2              pkgdown_2.2.0               #> [111] readr_2.1.5                 prettyunits_1.2.0           #> [113] AnnotationFilter_1.34.0     scales_1.4.0                #> [115] affy_1.88.0                 ncdf4_1.24                  #> [117] purrr_1.2.0                 crayon_1.5.3                #> [119] rlang_1.1.6                 vsn_3.78.0"},{"path":"https://stanstrup.github.io/tidyXCMS/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Jan Stanstrup. Author, maintainer.","code":""},{"path":"https://stanstrup.github.io/tidyXCMS/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Stanstrup J (2025). tidyXCMS: Tidy Interface XCMS Metabolomics Data Processing. R package version 0.99.15, https://stanstrup.github.io/tidyXCMS.","code":"@Manual{,   title = {tidyXCMS: Tidy Interface for XCMS Metabolomics Data Processing},   author = {Jan Stanstrup},   year = {2025},   note = {R package version 0.99.15},   url = {https://stanstrup.github.io/tidyXCMS}, }"},{"path":"https://stanstrup.github.io/tidyXCMS/index.html","id":"tidyxcms","dir":"","previous_headings":"","what":"Tidy Interface for XCMS Metabolomics Data Processing","title":"Tidy Interface for XCMS Metabolomics Data Processing","text":"Tidy interface XCMS metabolomics data processing","code":""},{"path":"https://stanstrup.github.io/tidyXCMS/index.html","id":"overview","dir":"","previous_headings":"","what":"Overview","title":"Tidy Interface for XCMS Metabolomics Data Processing","text":"tidyXCMS provides modern, tidy interface working XCMS metabolomics data, making easier integrate XCMS workflows tidyverse ecosystem.","code":""},{"path":"https://stanstrup.github.io/tidyXCMS/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Tidy Interface for XCMS Metabolomics Data Processing","text":"","code":"# Install from GitHub # devtools::install_github(\"stanstrup/tidyXCMS\")"},{"path":"https://stanstrup.github.io/tidyXCMS/index.html","id":"usage","dir":"","previous_headings":"","what":"Usage","title":"Tidy Interface for XCMS Metabolomics Data Processing","text":"Optional annotations: CAMERA: Group features retention time, correlation across samples EIC similarity. Add isotope, adduct, pseudo-spectra annotations MsFeatures: Group features retention time correlation across samples. See vignette detailed examples.","code":"library(tidyXCMS) library(xcms)  # Load preprocessed XCMS data xdata <- loadXcmsData(\"xmse\")  # Create long-format peak table peak_table <- tidy_peaklist(xdata)  # Result: one row per feature per sample # Includes peak intensities, m/z, RT, and sample metadata head(peak_table)"},{"path":"https://stanstrup.github.io/tidyXCMS/index.html","id":"development","dir":"","previous_headings":"","what":"Development","title":"Tidy Interface for XCMS Metabolomics Data Processing","text":"package uses: Semantic versioning via semantic-release Automated documentation via pkgdown Continuous integration via GitHub Actions","code":""},{"path":"https://stanstrup.github.io/tidyXCMS/index.html","id":"license","dir":"","previous_headings":"","what":"License","title":"Tidy Interface for XCMS Metabolomics Data Processing","text":"MIT License","code":""},{"path":"https://stanstrup.github.io/tidyXCMS/reference/tidyXCMS-package.html","id":null,"dir":"Reference","previous_headings":"","what":"tidyXCMS: Tidy Interface for XCMS Metabolomics Data Processing ‚Äî tidyXCMS-package","title":"tidyXCMS: Tidy Interface for XCMS Metabolomics Data Processing ‚Äî tidyXCMS-package","text":"Provides tidy interface working XCMS metabolomics data. package offers functions extract manipulate XCMS peak detection feature grouping results long-format tibbles, facilitating downstream analysis visualization.","code":""},{"path":[]},{"path":"https://stanstrup.github.io/tidyXCMS/reference/tidyXCMS-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"tidyXCMS: Tidy Interface for XCMS Metabolomics Data Processing ‚Äî tidyXCMS-package","text":"Maintainer: Jan Stanstrup stanstrup@gmail.com (ORCID)","code":""},{"path":"https://stanstrup.github.io/tidyXCMS/reference/tidy_peaklist.html","id":null,"dir":"Reference","previous_headings":"","what":"Create Tidy Long-Format Peak Table with Optional Annotations ‚Äî tidy_peaklist","title":"Create Tidy Long-Format Peak Table with Optional Annotations ‚Äî tidy_peaklist","text":"Generates comprehensive long-format peak table row represents one feature one sample. Optionally includes CAMERA annotations isotopes, adducts, pseudospectrum groups provided.","code":""},{"path":"https://stanstrup.github.io/tidyXCMS/reference/tidy_peaklist.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create Tidy Long-Format Peak Table with Optional Annotations ‚Äî tidy_peaklist","text":"","code":"tidy_peaklist(x, xsAnnotate = NULL)"},{"path":"https://stanstrup.github.io/tidyXCMS/reference/tidy_peaklist.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create Tidy Long-Format Peak Table with Optional Annotations ‚Äî tidy_peaklist","text":"x xcms::XCMSnExp xcms::XcmsExperiment object containing peak detection results. Feature grouping (via xcms::groupChromPeaks()) optional recommended. xsAnnotate Optional. xsAnnotate object CAMERA package containing peak annotations (isotopes, adducts, pseudospectrum groups). NULL (default), annotation columns included output.","code":""},{"path":"https://stanstrup.github.io/tidyXCMS/reference/tidy_peaklist.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create Tidy Long-Format Peak Table with Optional Annotations ‚Äî tidy_peaklist","text":"tibble::tibble long format one row per feature per sample (one row per peak per sample features defined). tibble contains: Feature-level columns f_mzmed, f_mzmin, f_mzmax, f_rtmed, f_rtmin, f_rtmax - feature summary statistics (features defined) CAMERA annotations isotopes, adduct, pcgroup (pseudospectrum group) - present xsAnnotate provided MsFeatures grouping feature_group - feature group ID MsFeatures::groupFeatures(), present groupFeatures applied Peak-level columns mz, rt, , intb, maxo, sn - individual peak measurements Sample information filepath, filename, fromFile - sample identifiers Additional columns columns pData(x) sampleData(x)","code":""},{"path":"https://stanstrup.github.io/tidyXCMS/reference/tidy_peaklist.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Create Tidy Long-Format Peak Table with Optional Annotations ‚Äî tidy_peaklist","text":"function integrates data multiple sources: Chromatographic peaks xcms::chromPeaks() Feature definitions xcms::featureDefinitions() (available) Feature intensities xcms::featureValues() (features defined) CAMERA annotations xsAnnotate object (provided) Sample metadata Biobase::pData() MsExperiment::sampleData() function supports xcms::XCMSnExp xcms::XcmsExperiment objects, providing flexibility modern XCMS workflows. Feature grouping optional: xcms::groupChromPeaks() run, function return peak-level data , without feature-level aggregation. Intensity matching: multiple peaks sample assigned single feature, XCMS parameter (method = \"maxint\") selects peak intensity use. function filters peaks match intensity values XCMS selected, ensuring consistency XCMS's feature intensity matrix. Missing values (NA) indicate feature detected particular sample.","code":""},{"path":"https://stanstrup.github.io/tidyXCMS/reference/tidy_peaklist.html","id":"note","dir":"Reference","previous_headings":"","what":"Note","title":"Create Tidy Long-Format Peak Table with Optional Annotations ‚Äî tidy_peaklist","text":"XCMS sometimes creates duplicate peaks; function keeps first occurrence. function uses \"maxint\" method feature values, meaning takes maximum intensity peak feature sample. CAMERA annotations optional. xsAnnotate NULL, isotopes, adduct, pcgroup columns present output. MsFeatures grouping automatically detected. MsFeatures::groupFeatures() applied object, feature_group column included output. XcmsExperiment objects, sample metadata accessed via sampleData() instead pData(). large datasets (many features √ó many samples), output can memory-intensive. warning issued expected output exceeds 10 million rows.","code":""},{"path":"https://stanstrup.github.io/tidyXCMS/reference/tidy_peaklist.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create Tidy Long-Format Peak Table with Optional Annotations ‚Äî tidy_peaklist","text":"","code":"# \\donttest{ library(xcms) #> Loading required package: BiocParallel #>  #> This is xcms version 4.8.0  library(BiocParallel)  # Load example data faahko_sub <- loadXcmsData(\"faahko_sub\")  # Peak detection cwp <- CentWaveParam(peakwidth = c(20, 80), noise = 5000) xdata <- findChromPeaks(faahko_sub, param = cwp, BPPARAM = SerialParam()) #> Removed previously identified chromatographic peaks. #> Detecting mass traces at 25 ppm ...  #> OK #> Detecting chromatographic peaks in 2075 regions of interest ... #>  OK: 561 found. #> Detecting mass traces at 25 ppm ...  #> OK #> Detecting chromatographic peaks in 2308 regions of interest ... #>  OK: 741 found. #> Detecting mass traces at 25 ppm ...  #> OK #> Detecting chromatographic peaks in 2081 regions of interest ... #>  OK: 448 found.  # Peak grouping pdp <- PeakDensityParam(sampleGroups = rep(1, length(fileNames(xdata))),                         minFraction = 0.5) xdata <- groupChromPeaks(xdata, param = pdp)  # Example 1: Without CAMERA annotations peak_table_no_camera <- tidy_peaklist(xdata) head(peak_table_no_camera) #> # A tibble: 6 √ó 24 #>   sampleNames fromFile feature_id f_mzmed f_mzmin f_mzmax f_rtmed f_rtmin #>   <chr>          <dbl>      <int>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl> #> 1 ko15.CDF           1          1    205     205     205    2788.   2785. #> 2 ko15.CDF           1          2    206     206     206    2785.   2783. #> 3 ko15.CDF           1          3    207.    207.    207.   2713.   2711. #> 4 ko15.CDF           1          4    233     233     233    3025.   3024. #> 5 ko15.CDF           1          5    233.    233.    233.   3016.   3015. #> 6 ko15.CDF           1          6    240.    240.    240.   3677.   3675. #> # ‚Ñπ 16 more variables: f_rtmax <dbl>, ms_level <int>, filepath <chr>, #> #   filename <chr>, peakidx <dbl>, mz <dbl>, mzmin <dbl>, mzmax <dbl>, #> #   rt <dbl>, rtmin <dbl>, rtmax <dbl>, into <dbl>, intb <dbl>, maxo <dbl>, #> #   sn <dbl>, is_filled <lgl>  # Example 2: With CAMERA annotations library(CAMERA) library(commonMZ)  # Convert to xcmsSet for CAMERA (CAMERA requires the old xcmsSet class) xset <- as(xdata, \"xcmsSet\") #> Note: you might want to set/adjust the 'sampclass' of the returned xcmSet object before proceeding with the analysis.  # CAMERA annotation xs <- xsAnnotate(xset, polarity = \"positive\") xs <- groupFWHM(xs, perfwhm = 0.1, intval = \"into\", sigma = 6) #> Start grouping after retention time. #> Created 227 pseudospectra. xs <- findIsotopes(xs, ppm = 10, mzabs = 0.01, intval = \"into\") #> Generating peak matrix! #> Run isotope peak annotation #>  % finished: 10  20  30  40  50  60  70  80  90  100   #> Found isotopes: 23  xs <- groupCorr(xs, calcIso = FALSE, calcCiS = TRUE, calcCaS = FALSE,                 cor_eic_th = 0.7, pval = 1E-6) #> Start grouping after correlation. #> Generating EIC's ..  #> Warning: Found NA peaks in selected sample. #>  #> Calculating peak correlations in 227 Groups...  #>  % finished: 10  20  30  40  50  60  70  80  90  100   #>  #> Calculating graph cross linking in 227 Groups...  #>  % finished: 10  20  30  40  50  60  70  80  90  100   #> New number of ps-groups:  280  #> xsAnnotate has now 280 groups, instead of 227   # Get adduct/fragment rules from commonMZ rules_pos <- commonMZ::MZ_CAMERA(mode = \"pos\", warn_clash = TRUE, clash_ppm = 5) #> Warning: The following adducts/fragments seem to collide.  #> # A tibble: 2 √ó 2 #>   first       second                              #>   <chr>       <chr>                               #> 1 [M+H-NH3]+  [M+NH4]+                            #> 2 [M+H-C3H4]+ [M+H+(CH3)2CO-H2O]+ (acetone cond.) #>  #>  #> Consider removing one of them. Example:  #>  rules=rules[            !grepl(\"[M+NH4]+\",rules[,\"name\"],fixed=TRUE)         ,] rules_pos <- as.data.frame(rules_pos)  # Find adducts using the rules xs <- findAdducts(xs, ppm = 10, mzabs = 0.01, multiplier = 4,                   polarity = \"positive\", rules = rules_pos) #> Generating peak matrix for peak annotation! #> Polarity is set in xsAnnotate: positive  #> Found and use user-defined ruleset! #> Calculating possible adducts in 280 Groups...  #>  % finished: 10  20  30  40  50  60  70  80  90  100    # Create long-format peak table peak_table <- tidy_peaklist(xdata, xs) head(peak_table) #> # A tibble: 6 √ó 27 #>   sampleNames fromFile feature_id f_mzmed f_mzmin f_mzmax f_rtmed f_rtmin #>   <chr>          <dbl>      <int>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl> #> 1 ko15.CDF           1          1    205     205     205    2788.   2785. #> 2 ko15.CDF           1          2    206     206     206    2785.   2783. #> 3 ko15.CDF           1          3    207.    207.    207.   2713.   2711. #> 4 ko15.CDF           1          4    233     233     233    3025.   3024. #> 5 ko15.CDF           1          5    233.    233.    233.   3016.   3015. #> 6 ko15.CDF           1          6    240.    240.    240.   3677.   3675. #> # ‚Ñπ 19 more variables: f_rtmax <dbl>, ms_level <int>, isotopes <chr>, #> #   adduct <chr>, pcgroup <int>, filepath <chr>, filename <chr>, peakidx <dbl>, #> #   mz <dbl>, mzmin <dbl>, mzmax <dbl>, rt <dbl>, rtmin <dbl>, rtmax <dbl>, #> #   into <dbl>, intb <dbl>, maxo <dbl>, sn <dbl>, is_filled <lgl>  # Explore the data library(dplyr) #>  #> Attaching package: 'dplyr' #> The following object is masked from 'package:MSnbase': #>  #>     combine #> The following objects are masked from 'package:S4Vectors': #>  #>     first, intersect, rename, setdiff, setequal, union #> The following object is masked from 'package:Biobase': #>  #>     combine #> The following objects are masked from 'package:BiocGenerics': #>  #>     combine, intersect, setdiff, setequal, union #> The following object is masked from 'package:generics': #>  #>     explain #> The following objects are masked from 'package:xcms': #>  #>     collect, groups #> The following objects are masked from 'package:stats': #>  #>     filter, lag #> The following objects are masked from 'package:base': #>  #>     intersect, setdiff, setequal, union  # Count features per sample peak_table %>%   group_by(filename) %>%   summarize(n_features = sum(!is.na(into))) #> # A tibble: 3 √ó 2 #>   filename n_features #>   <chr>         <int> #> 1 ko15.CDF        292 #> 2 ko16.CDF        318 #> 3 ko18.CDF        303  # View adduct annotations peak_table %>%   filter(!is.na(adduct)) %>%   select(feature_id, f_mzmed, f_rtmed, adduct, pcgroup) #> # A tibble: 1,044 √ó 5 #>    feature_id f_mzmed f_rtmed adduct                                     pcgroup #>         <int>   <dbl>   <dbl> <chr>                                        <int> #>  1          1    205    2788. \"[M+H-C3H9N-C2H4O2]+ 323.091\"                   10 #>  2          2    206    2785. \"[M+H-NH3-C3H4]+ 262.041 [M+H-C4H6O]+ 275‚Ä¶      36 #>  3          3    207.   2713. \"\"                                             164 #>  4          4    233    3025. \"\"                                             181 #>  5          5    233.   3016. \"\"                                             208 #>  6          6    240.   3677. \"\"                                             228 #>  7          7    241.   3670. \"\"                                              97 #>  8          8    242.   3674. \"\"                                             202 #>  9          9    244.   2829. \"\"                                             146 #> 10         10    249.   3664. \"[M+H-C4H6-H2O]+ 320.158 [M+H-C4H6-NH3-H2‚Ä¶     111 #> # ‚Ñπ 1,034 more rows  # Example 3: With XcmsExperiment object library(MsExperiment) library(msdata) #>  #> Attaching package: 'msdata' #> The following object is masked from 'package:dplyr': #>  #>     ident  # Load data as XcmsExperiment fls <- dir(system.file(\"sciex\", package = \"msdata\"), full.names = TRUE) xdata_exp <- readMsExperiment(spectraFiles = fls[1:2], BPPARAM = SerialParam())  # Peak detection and grouping cwp <- CentWaveParam(peakwidth = c(5, 20), noise = 100) xdata_exp <- findChromPeaks(xdata_exp, param = cwp, BPPARAM = SerialParam()) pdp <- PeakDensityParam(sampleGroups = rep(1, 2), minFraction = 0.5) xdata_exp <- groupChromPeaks(xdata_exp, param = pdp)  # Create peak table without CAMERA peak_table_exp <- tidy_peaklist(xdata_exp) head(peak_table_exp) #> # A tibble: 6 √ó 25 #>   sample_index spectraOrigin fromFile feature_id f_mzmed f_mzmin f_mzmax f_rtmed #>          <int> <chr>            <dbl>      <int>   <dbl>   <dbl>   <dbl>   <dbl> #> 1            1 /home/runner‚Ä¶        1          1    105.    105.    105.    63.1 #> 2            1 /home/runner‚Ä¶        1          2    105.    105.    105.   158.  #> 3            1 /home/runner‚Ä¶        1          3    105.    105.    105.   203.  #> 4            1 /home/runner‚Ä¶        1          4    106.    106.    106.   181.  #> 5            1 /home/runner‚Ä¶        1          5    106.    106.    106.   195.  #> 6            1 /home/runner‚Ä¶        1          6    106.    106.    106.    30.8 #> # ‚Ñπ 17 more variables: f_rtmin <dbl>, f_rtmax <dbl>, ms_level <int>, #> #   filepath <chr>, filename <chr>, peakidx <dbl>, mz <dbl>, mzmin <dbl>, #> #   mzmax <dbl>, rt <dbl>, rtmin <dbl>, rtmax <dbl>, into <dbl>, intb <dbl>, #> #   maxo <dbl>, sn <dbl>, is_filled <lgl> # }"},{"path":[]},{"path":"https://stanstrup.github.io/tidyXCMS/news/index.html","id":"code-refactoring-0-99-15","dir":"Changelog","previous_headings":"","what":"Code Refactoring","title":"Changes in v0.99.15","text":"comprehensive code improvements function rename tidy_peaklist (079448c)","code":""},{"path":"https://stanstrup.github.io/tidyXCMS/news/index.html","id":"breaking-changes-0-99-15","dir":"Changelog","previous_headings":"","what":"BREAKING CHANGES","title":"Changes in v0.99.15","text":"Function renamed XCMSnExp_CAMERA_peaklist_long tidy_peaklist. Users must update function calls existing code. ü§ñ Generated Claude Code Co-Authored-: Claude noreply@anthropic.com","code":""},{"path":[]},{"path":"https://stanstrup.github.io/tidyXCMS/news/index.html","id":"bug-fixes-0-99-14","dir":"Changelog","previous_headings":"","what":"Bug Fixes","title":"Changes in v0.99.14","text":"use list.files recursive search CDF path matching (e85f6f5)","code":""},{"path":[]},{"path":"https://stanstrup.github.io/tidyXCMS/news/index.html","id":"bug-fixes-0-99-13","dir":"Changelog","previous_headings":"","what":"Bug Fixes","title":"Changes in v0.99.13","text":"improve path matching vignette use basename (80a3aa1) resolve semantic-release sync-bioc-tag.sh execution failure (2609ea2)","code":""},{"path":[]},{"path":"https://stanstrup.github.io/tidyXCMS/news/index.html","id":"bug-fixes-0-99-12","dir":"Changelog","previous_headings":"","what":"Bug Fixes","title":"Changes in v0.99.12","text":"add missing comma Remotes add S4Vectors Suggests (974a3a8)","code":""},{"path":[]},{"path":"https://stanstrup.github.io/tidyXCMS/news/index.html","id":"bug-fixes-0-99-11","dir":"Changelog","previous_headings":"","what":"Bug Fixes","title":"Changes in v0.99.11","text":"correct sampleData assignment add alt text vignette plots (aa576af)","code":""},{"path":[]},{"path":"https://stanstrup.github.io/tidyXCMS/news/index.html","id":"bug-fixes-0-99-10","dir":"Changelog","previous_headings":"","what":"Bug Fixes","title":"Changes in v0.99.10","text":"add missing rlang import syms function (b0c0a58) apply feature_group fix CAMERA annotation test (c6a09e3) exclude .bioc_version file package build (38da0f1) handle XCMSnExp XcmsExperiment pData test (6251bc9)","code":""},{"path":[]},{"path":"https://stanstrup.github.io/tidyXCMS/news/index.html","id":"features-0-99-9","dir":"Changelog","previous_headings":"","what":"Features","title":"Changes in v0.99.9","text":"add groupFeatures integration MsFeatures package (bea8117)","code":""},{"path":[]},{"path":"https://stanstrup.github.io/tidyXCMS/news/index.html","id":"bug-fixes-0-99-8","dir":"Changelog","previous_headings":"","what":"Bug Fixes","title":"Changes in v0.99.8","text":"add .Rbuildignore suppress hidden files warning (11f4586) add explicit MSnbase library call vignette (6f3c6fb) add explicit namespace references fileNames vignette (7d1e9f9) add GitHub remote commonMZ package (5401ce0) convert prepare-news.sh Unix line endings (LF) (8abd768) correct sampleData import MsExperiment package (2f0be73) correct xdata file paths use system-specific location (8d60f1a) ensure CAMERA annotation columns always exist output (4baab46) ensure package version stays 1.0.0 Bioconductor (b1bc012) merge conflict (d5aa8dc) replace non-existent fileNames<- proper dataOrigin replacement (3995b38) resolve devtools::check() test failures loadXcmsData (28f60b0) resolve import issues vignette build errors (0a18dec) resolve NEWS.md duplicate versions sync GitHub releases (90f9180) resolve package issues improve CAMERA integration (cc7a73c) resolve XcmsExperiment compatibility CAMERA column issues (a2e50ee) skip groupCorr step vignette small example dataset (561fa6a) update author information correct ORCID (0af1279) use loadXcmsData() instead faahKO package (70c89b0)","code":""},{"path":"https://stanstrup.github.io/tidyXCMS/news/index.html","id":"features-0-99-8","dir":"Changelog","previous_headings":"","what":"Features","title":"Changes in v0.99.8","text":"add XCMSnExp_CAMERA_peaklist_long function comprehensive package structure (c0a7dc8) integrate commonMZ CAMERA adduct/fragment rules (ababed5) make CAMERA annotations optional XcmsExperiment support (dc802ab)","code":""},{"path":[]},{"path":"https://stanstrup.github.io/tidyXCMS/news/index.html","id":"bug-fixes-0-99-7","dir":"Changelog","previous_headings":"","what":"Bug Fixes","title":"Changes in v0.99.7","text":"replace non-existent fileNames<- proper dataOrigin replacement (3995b38)","code":""},{"path":[]},{"path":"https://stanstrup.github.io/tidyXCMS/news/index.html","id":"bug-fixes-0-99-6","dir":"Changelog","previous_headings":"","what":"Bug Fixes","title":"Changes in v0.99.6","text":"add explicit MSnbase library call vignette (6f3c6fb) add explicit namespace references fileNames vignette (7d1e9f9)","code":""},{"path":[]},{"path":"https://stanstrup.github.io/tidyXCMS/news/index.html","id":"bug-fixes-0-99-5","dir":"Changelog","previous_headings":"","what":"Bug Fixes","title":"Changes in v0.99.5","text":"add GitHub remote commonMZ package (5401ce0)","code":""},{"path":[]},{"path":"https://stanstrup.github.io/tidyXCMS/news/index.html","id":"features-0-99-4","dir":"Changelog","previous_headings":"","what":"Features","title":"Changes in v0.99.4","text":"integrate commonMZ CAMERA adduct/fragment rules (ababed5)","code":""},{"path":[]},{"path":"https://stanstrup.github.io/tidyXCMS/news/index.html","id":"bug-fixes-0-99-3","dir":"Changelog","previous_headings":"","what":"Bug Fixes","title":"Changes in v0.99.3","text":"correct xdata file paths use system-specific location (8d60f1a)","code":""},{"path":[]},{"path":"https://stanstrup.github.io/tidyXCMS/news/index.html","id":"bug-fixes-0-99-2","dir":"Changelog","previous_headings":"","what":"Bug Fixes","title":"Changes in v0.99.2","text":"ensure package version stays 1.0.0 Bioconductor (b1bc012)","code":""},{"path":[]},{"path":"https://stanstrup.github.io/tidyXCMS/news/index.html","id":"bug-fixes-0-99-1","dir":"Changelog","previous_headings":"","what":"Bug Fixes","title":"Changes in v0.99.1","text":"add .Rbuildignore suppress hidden files warning (11f4586) convert prepare-news.sh Unix line endings (LF) (8abd768) correct sampleData import MsExperiment package (2f0be73) ensure CAMERA annotation columns always exist output (4baab46) merge conflict (d5aa8dc) resolve devtools::check() test failures loadXcmsData (28f60b0) resolve import issues vignette build errors (0a18dec) resolve package issues improve CAMERA integration (cc7a73c) resolve XcmsExperiment compatibility CAMERA column issues (a2e50ee) skip groupCorr step vignette small example dataset (561fa6a) update author information correct ORCID (0af1279) use loadXcmsData() instead faahKO package (70c89b0)","code":""},{"path":"https://stanstrup.github.io/tidyXCMS/news/index.html","id":"features-0-99-1","dir":"Changelog","previous_headings":"","what":"Features","title":"Changes in v0.99.1","text":"add XCMSnExp_CAMERA_peaklist_long function comprehensive package structure (c0a7dc8) make CAMERA annotations optional XcmsExperiment support (dc802ab)","code":""}]
